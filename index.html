<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MCCNETWORLD – 미리보기</title>

<style>
  :root{--bg:#f6f8fb;--card:#ffffff;--line:#e5e9f2;--fg:#0b1220}
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--fg);font:15px/1.6 system-ui,"Noto Sans KR",sans-serif}
  .wrap{max-width:1200px;margin:0 auto;padding:18px}
  .panel{background:var(--card);border:1px solid var(--line);border-radius:16px;overflow:hidden;box-shadow:0 10px 30px rgba(16,24,40,.04)}
  .hd{display:flex;align-items:center;justify-content:center;padding:14px 16px;border-bottom:1px solid var(--line)}
  .hd strong{font-weight:900;letter-spacing:.2px}
  .stack{padding:20px}
  .section-title{font-weight:900;margin:0 0 12px 2px;font-size:16px}
  .brand-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:18px;margin:6px 0 20px}

  /* =========================================================
     카드(브랜드) 공통 스타일
  ========================================================= */
  .brand{
    position:relative;
    border-radius:18px;
    cursor:pointer;
    isolation:isolate;
    transition:transform .08s ease, box-shadow .15s ease, border-color .15s ease;
    border:1px solid var(--line);
    background:linear-gradient(180deg,#fff,#fafcff);
    overflow:hidden;
  }
  .brand:hover{transform:translateY(-1px);box-shadow:0 8px 24px rgba(2,6,23,.08)}

  /* =========================================================
     ✅ 로고 영역 (틀/테두리 없음)
     - 로고 이미지 자체가 “완전 진하게” 보이게
  ========================================================= */
  .logo-frame{
    width: 180px;
    height: 60px;
    margin: 18px auto 10px;

    display:flex;
    align-items:center;
    justify-content:center;

    background: transparent;
    border: 0;
    border-radius: 0;
    box-shadow: none;
    padding: 0;
  }
  .logo-frame img{
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    display:block;
  }

  /* =========================================================
     브랜드명(텍스트)
  ========================================================= */
  .brand .name{
    text-align:center;
    font-size:20px;
    font-weight:900;
    letter-spacing:-0.3px;
    line-height:1.25;

    display:-webkit-box;
    -webkit-line-clamp:2;
    -webkit-box-orient:vertical;
    overflow:hidden;

    padding: 0 16px 18px;
  }
  .brand.long-name .name{
    font-size:15px;
    font-weight:800;
  }

  .cap{
    text-align:center;
    padding:0 18px 18px;
    color:#475467;
    font-size:12px;
  }

  /* 현재 미사용(유지) */
  .ribbon{display:none;}
  .tag{display:none;}

  .theme-um{--chip-bg:#f3e8ff;--chip-fg:#3b0764;--chip-bd:#8b5cf6;--ribbon-bg:#ede9fe;--ribbon-fg:#5b21b6}
  .theme-mm{--chip-bg:#e0f2fe;--chip-fg:#0b4a6f;--chip-bd:#38bdf8;--ribbon-bg:#e0f2fe;--ribbon-fg:#0c4a6e}
  .theme-s7{--chip-bg:#d1fae5;--chip-fg:#064e3b;--chip-bd:#10b981;--ribbon-bg:#ecfdf5;--ribbon-fg:#065f46}
  .theme-pr{--chip-bg:#dbeafe;--chip-fg:#1e40af;--chip-bd:#60a5fa;--ribbon-bg:#eef2ff;--ribbon-fg:#1d4ed8}

  .tabs{display:flex;gap:8px;margin-bottom:12px}
  .tab-btn{padding:8px 16px;border-radius:999px;border:1px solid var(--line);background:#fff;cursor:pointer}
  .tab-btn.active{background:#111827;color:#fff;border-color:#111827}
</style>
</head>

<body>
  <div class="wrap">
    <section class="panel">
      <div class="hd"><strong>MCCNETWORLD</strong></div>

      <div class="stack">
        <!-- 가입 서류 -->
        <div class="section-title">가입 서류</div>
        <div id="joinTabs">
          <div class="tabs">
            <button class="tab-btn active" data-target="adult">성인</button>
            <button class="tab-btn" data-target="teen">청소년</button>
          </div>
          <div class="brand-grid" id="joinTabsList"></div>
        </div>

        <!-- 변경 서류 -->
        <div class="section-title" style="margin-top:8px">변경 서류</div>
        <div id="changeTabs">
          <div class="tabs">
            <button class="tab-btn active" data-target="uplus">LG U+</button>
            <button class="tab-btn" data-target="kt">KT</button>
            <button class="tab-btn" data-target="sk">SKT</button>
          </div>
          <div class="brand-grid" id="changeTabsList"></div>
        </div>

        <!-- 해지 서류 -->
        <div class="section-title" style="margin-top:16px">해지 서류</div>
        <div id="cancelTabs">
          <div class="tabs">
            <button class="tab-btn active" data-target="uplus">LG U+</button>
            <button class="tab-btn" data-target="kt">KT</button>
            <button class="tab-btn" data-target="sk">SKT</button>
          </div>
          <div class="brand-grid" id="cancelTabsList"></div>
        </div>
      </div>
    </section>
  </div>

<script>
/* =========================================================
   ✅ B안 핵심: 가입서류에서 현재 선택된 탭(성인/청소년)
   - card()가 이 값을 보고 로고를 adult/teen 중 선택합니다.
========================================================= */
let JOIN_AGE = 'adult';

/* =========================================================
   1) 브랜드 마스터
   - logoAdult: 성인용 로고 이미지
   - logoTeen : 청소년용 로고 이미지 (없으면 adult 로고를 자동 사용)
   ※ 변경/해지에서는 기본적으로 logoAdult 사용 (원하면 별도 분리 가능)
========================================================= */
const BRANDS = [
  {
    carrier:'uplus', theme:'theme-um', name:'미디어로그', cap:'',
    logoAdult:'/assets/logos/umobile.png',
    logoTeen :'/assets/logos/umobile-teen.png'
  },
  {
    carrier:'uplus', theme:'theme-pr', name:'프리티LG', cap:'',
    logoAdult:'/assets/logos/freet-lg.png',
    logoTeen :'/assets/logos/freet-lg-teen.png'
  },
  {
    carrier:'uplus', theme:'theme-um', name:'헬로LG', cap:'',
    logoAdult:'/assets/logos/hello-lg.png',
    logoTeen :'/assets/logos/hello-lg-teen.png'
  },

  {
    carrier:'kt', theme:'theme-mm', name:'엠모바일', cap:'',
    logoAdult:'/assets/logos/mmobile.png',
    logoTeen :'/assets/logos/mmobile-teen.png'
  },
  {
    carrier:'kt', theme:'theme-mm', name:'스테이지파이브(KT)', cap:'',
    logoAdult:'/assets/logos/stagefive-kt.png',
    logoTeen :'/assets/logos/stagefive-kt-teen.png'
  },
  {
    carrier:'kt', theme:'theme-mm', name:'스카이라이프', cap:'',
    logoAdult:'/assets/logos/skylife.png',
    logoTeen :'/assets/logos/skylife-teen.png'
  },

  {
    carrier:'sk', theme:'theme-pr', name:'프리티SK', cap:'',
    logoAdult:'/assets/logos/freet-sk.png',
    logoTeen :'/assets/logos/freet-sk-teen.png'
  },
  {
    carrier:'sk', theme:'theme-s7', name:'SK텔링크', cap:'',
    logoAdult:'/assets/logos/telink.png',
    logoTeen :'/assets/logos/telink-teen.png'
  },
  {
    carrier:'sk', theme:'theme-mm', name:'스테이지파이브(SKT)', cap:'',
    logoAdult:'/assets/logos/stagefive-skt.png',
    logoTeen :'/assets/logos/stagefive-skt-teen.png'
  }
];

/* =========================================================
   2) 가입서류 전용 카드
   - 이것도 B안 적용 가능(신규/번이/웰컴 등)
   - logoAdult/logoTeen 둘 다 주면 탭에 따라 자동 전환
   - logoTeen이 없으면 adult 로고로 대체
========================================================= */
const JOIN_ONLY = [
  {
    carrier:'kt', theme:'theme-mm', name:'정규KT신규', cap:'',
    logoAdult:'/assets/logos/kt-regular-new.png',
    logoTeen :'/assets/logos/kt-regular-new-teen.png'
  },
  {
    carrier:'kt', theme:'theme-mm', name:'정규KT번이', cap:'',
    logoAdult:'/assets/logos/kt-regular-mnp.png',
    logoTeen :'/assets/logos/kt-regular-mnp-teen.png'
  },
  {
    carrier:'kt', theme:'theme-mm', name:'웰컴 요금제 신규', cap:'',
    logoAdult:'/assets/logos/kt-welcome-new.png',
    logoTeen :'/assets/logos/kt-welcome-new-teen.png'
  },
  {
    carrier:'kt', theme:'theme-mm', name:'웰컴 요금제 번이', cap:'',
    logoAdult:'/assets/logos/kt-welcome-mnp.png',
    logoTeen :'/assets/logos/kt-welcome-mnp-teen.png'
  },
  {
    carrier:'kt', theme:'theme-mm', name:'KT 유선 동판', cap:'',
    logoAdult:'/assets/logos/kt-wire.png',
    logoTeen :'/assets/logos/kt-wire-teen.png'
  }
];

/* =========================================================
   3) 가입 데이터(탭에 따라 "age"만 바뀌고 목록은 동일)
   - 기존처럼 adult/teen 배열을 따로 만드는 구조는 유지하되,
     로고는 logoAdult/logoTeen으로 완전 분리된 이미지 사용
========================================================= */
const JOIN_DATA = {
  adult: [
    ...BRANDS.map(b => ({...b, doc:'join', age:'adult'})),
    ...JOIN_ONLY.map(b => ({...b, doc:'join', age:'adult'})),
  ],
  teen : [
    ...BRANDS.map(b => ({...b, doc:'join', age:'teen'})),
    ...JOIN_ONLY.map(b => ({...b, doc:'join', age:'teen'})),
  ]
};

/* 변경/해지는 기존 브랜드만 표시 */
const CHANGE_CARDS = BRANDS.map(b => ({...b, doc:'change'}));
const CANCEL_CARDS = BRANDS.map(b => ({...b, doc:'cancel'}));

/* =========================================================
   4) 라우팅(클릭 시 이동)
========================================================= */
const BRAND_ROUTE = {
  '미디어로그':     { carrier:'uplus', brand:'umobile'   },
  '프리티LG':       { carrier:'uplus', brand:'freeT'     },
  '헬로LG':         { carrier:'uplus', brand:'hello'     },
  '엠모바일':       { carrier:'kt',    brand:'mmobile'   },
  '스카이라이프':   { carrier:'kt',    brand:'skylife'   },
  '스테이지파이브(KT)': { carrier:'kt', brand:'stagefive'   },
  '스테이지파이브(SKT)':{ carrier:'sk', brand:'stagefive-sk'},
  '프리티SK':       { carrier:'sk',    brand:'freeT-sk'  },

  '정규KT신규':     { external: 'https://online.kt.com/index.jsp?prdcID=57DA59EE-6F27-48EB-8BCC-3EEC80E914F2' },
  '정규KT번이':     { external: 'https://online.kt.com/index.jsp?prdcID=05312F26-4C8C-438E-BA6A-C1B8A4650C0C' },

  '웰컴 요금제 신규': { external: 'https://online.kt.com/index.jsp?prdcID=1D78452F-43CB-44C9-B77C-B40DE4908727' },
  '웰컴 요금제 번이': { external: 'https://online.kt.com/index.jsp?prdcID=584932E0-890C-4659-A3D4-E953DF6882FA' },

  'KT 유선 동판':  { external: 'https://online.kt.com/smart/simple/simpleCustomerInfoPop.do?prdcId=03EEA486-8915-4734-B9AE-B0476ADFC663' },
  'SK텔링크':      { external: 'https://smvno.sk7mobile.com/main.do' }
};

function buildBrandUrl(route, doc, age){
  if (!route || !route.carrier || !route.brand) return '#';

  let baseDir = location.pathname;
  if (!baseDir.endsWith('/')) baseDir = baseDir.replace(/\/[^/]*$/, '/');

  const base = `${baseDir}brands/${route.carrier}/${route.brand}/index.html`;
  const abs  = new URL(base, location.origin).href;

  const qs = new URLSearchParams();
  qs.set('mode','fill');
  qs.set('doc', doc || 'join');
  if ((doc || 'join') === 'join') qs.set('age', age || 'adult');

  return `${abs}?${qs.toString()}`;
}

/* =========================================================
   5) 카드 HTML 생성
   ✅ B안 핵심:
   - 가입서류(doc==='join')면 age에 따라
     logoAdult / logoTeen 중 선택
   - teen 로고가 없으면 adult 로고로 자동 대체
========================================================= */
function pickLogo(item){
  // 가입서류: age를 기준으로 로고 선택
  if (item.doc === 'join'){
    if (item.age === 'teen') return item.logoTeen || item.logoAdult || '';
    return item.logoAdult || item.logoTeen || '';
  }
  // 변경/해지: 기본은 adult 로고(원하면 별도 분리 가능)
  return item.logoAdult || item.logoTeen || '';
}

function card(item){
  const {theme, name, cap, doc, age} = item;
  const dataName = name.replace(/\(청소년\)/,'');
  const docAttr  = doc || 'join';
  const ageAttr  = (docAttr==='join' && age) ? ` data-age="${age}"` : '';

  const isLong = name.length >= 9;
  const longCls = isLong ? 'long-name' : '';

  const logo = pickLogo(item);
  const logoHtml = logo
    ? `<div class="logo-frame"><img src="${logo}" alt="${name} 로고"></div>`
    : '';

  return `
    <div class="brand ${theme} ${longCls}" data-name="${dataName}" data-doc="${docAttr}"${ageAttr}>
      ${logoHtml}
      <div class="name">${name}</div>
      ${cap ? `<div class="cap">${cap}</div>` : ``}
    </div>
  `;
}

/* 클릭 이동 */
function attachNavigateHandlers(scope){
  scope.querySelectorAll('.brand').forEach(cardEl=>{
    cardEl.addEventListener('click', ()=>{
      const nm  = cardEl.getAttribute('data-name')||'';
      const doc = cardEl.getAttribute('data-doc')||'join';
      const age = cardEl.getAttribute('data-age')||'';

      const route = BRAND_ROUTE[nm];
      if (!route) return console.warn('[route] 매핑 없음:', nm);

      if (route.external) return location.href = route.external;

      const url = buildBrandUrl(route, doc, age);
      if (url !== '#') location.href = url;
    });
  });
}

function safeRender(listEl, items){
  try{
    listEl.innerHTML = (items && items.length)
      ? items.map(card).join('')
      : '<div style="opacity:.6">자료 없음</div>';
    attachNavigateHandlers(listEl);
  }catch(err){
    console.error('[render error]', err);
    listEl.innerHTML = '<div style="color:#b91c1c;font-weight:800">렌더 오류 – 콘솔을 확인하세요.</div>';
  }
}

/* 가입 탭(성인/청소년) */
function wireKindTabs(containerId, listId, dataObj){
  const container = document.getElementById(containerId);
  const list = document.getElementById(listId);

  container.querySelectorAll('.tab-btn').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      container.querySelectorAll('.tab-btn').forEach(x=>x.classList.remove('active'));
      btn.classList.add('active');

      // ✅ 현재 선택 탭 저장(디버깅/확장용)
      JOIN_AGE = btn.dataset.target; // adult | teen

      const kind = btn.dataset.target;
      safeRender(list, (dataObj||{})[kind] || []);
    });
  });

  container.querySelector('.tab-btn.active').click();
}

/* 변경/해지 탭 */
function wireTabs(containerId, listId, data){
  const container = document.getElementById(containerId);
  const list = document.getElementById(listId);

  container.querySelectorAll('.tab-btn').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      container.querySelectorAll('.tab-btn').forEach(x=>x.classList.remove('active'));
      btn.classList.add('active');

      const target = btn.dataset.target;
      const items = (data||[]).filter(d=>d.carrier===target);
      safeRender(list, items);
    });
  });

  container.querySelector('.tab-btn.active').click();
}

window.addEventListener('DOMContentLoaded', ()=>{
  wireKindTabs('joinTabs','joinTabsList',JOIN_DATA);
  wireTabs('changeTabs','changeTabsList',CHANGE_CARDS);
  wireTabs('cancelTabs','cancelTabsList',CANCEL_CARDS);
});
</script>
</body>
</html>
